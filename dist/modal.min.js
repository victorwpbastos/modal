/**
* @name Modal
* @version 1.0.0
* @author Victor Bastos <victorwpbastos@gmail.com>
* @license MIT
*/
!function(t,o){"object"==typeof exports&&"undefined"!=typeof module?module.exports=o(require("jquery")):"function"==typeof define&&define.amd?define(["jquery"],o):t.Modal=o(t.$)}(this,function(t){"use strict";function o(o){t('[data-modal="'+o.data("modal")+'"]').remove(),o.off(),t(document).off("."+o.data("modal")),n(!0),t(".modal-background[data-modal]:last").css("display","block"),t(".modal[data-modal]:last").addClass("active-modal")}function e(o,e,n,a){e=e+"."+o.data("modal"),e.indexOf("key")!==-1?t(document).on(e,function(t){t.keyCode===n&&o.hasClass("active-modal")&&a()}):o.on(e,n,function(){o.hasClass("active-modal")&&a()})}function n(o){void 0===o&&(o=!1);var e=t("html"),n=window.innerWidth-t(window).width(),a=t(".modal[data-modal]"),d=a.last();n>0&&e.css({"overflow-y":"hidden","padding-right":n});try{var l=window.innerWidth-d[0].clientWidth;l>0&&(d.attr("data-scroll-width",l),d.css("overflow","hidden")),t("[data-scroll-width]").css("display","none").height(),t("[data-scroll-width]").css("display","block"),o&&d.data("scroll-width")&&(d.css("padding-left",d.data("scroll-width")),d.css("overflow","auto"))}catch(t){}0===a.length&&e.css({"overflow-y":"","padding-right":""})}function a(){t(".active-modal").focus(),t(".active-modal").find(":input").not("button").focus()}function d(o){var e=o.header,n=o.body,a=o.footer,d=o.showCloseButton;void 0===d&&(d=!0);var l="modal-"+Date.now(),s=t('<div class="modal-background" data-modal="'+l+'"/>'),i=t('\n\t\t<div class="modal" tabindex="-1" data-modal="'+l+'">\n\t\t\t<div class="modal-dialog">\n\t\t\t\t<div class="modal-content">\n\t\t\t\t\t<div class="modal-header"></div>\n\t\t\t\t\t<div class="modal-body"></div>\n\t\t\t\t\t<div class="modal-footer"></div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t');return i.css({display:"block",position:"fixed",top:"0",right:"0",bottom:"0",left:"0",overflow:"auto","z-index":""+(1e3+t(".modal[data-modal]").length)}),i.find(".modal-dialog").css({position:"relative",margin:"40px auto","max-height":"calc(100vh - 40px)"}),s.css({position:"fixed",top:"0",right:"0",bottom:"0",left:"0",background:"#000000",opacity:"0.5","z-index":""+(1e3+t(".modal-background[data-modal]").length)}),e?i.find(".modal-header").html(e):i.find(".modal-header").remove(),n&&i.find(".modal-body").html(n),a?i.find(".modal-footer").html(a):i.find(".modal-footer").remove(),d&&(e?i.find(".modal-header").append('\n\t\t\t\t<button type="button" class="close">&times;</button>\n\t\t\t'):i.find(".modal-body").prepend('\n\t\t\t\t<div>\n\t\t\t\t\t&nbsp;\n\t\t\t\t\t<button type="button" class="close">&times;</button>\n\t\t\t\t</div>\n\t\t\t')),e||n||a||i.find(".modal-content").empty(),0===t(".modal-background[data-modal]").length&&t("body").append(s),t("body").append([s,i]),i}function l(e){void 0===e&&(e={}),t(".modal-background").css("display","none"),t(".modal[data-modal]").removeClass("active-modal");var l=d(e);return l.addClass("active-modal"),a(),n(),{element:l,close:function(){o(l),a()}}}t="default"in t?t.default:t;var s={alert:{header:"",body:"",onClose:function(){},closeOnEsc:!0},confirm:{header:"",body:"",footer:'\n\t\t\t<button type="button" class="btn btn-default btn-no">{{btnNo}}</button>\n\t\t\t<button type="button" class="btn btn-success btn-yes">{{btnYes}}</button>\n\t\t',btnLabels:["No","Yes"],showCloseButton:!1,onClose:function(){},closeOnEsc:!0},prompt:{header:"",body:'\n\t\t\t<input type="text" class="form-control"/>\n\t\t',footer:'\n\t\t\t<button type="button" class="btn btn-success btn-confirm">{{btnLabel}}</button>\n\t\t',btnLabel:"Confirm",validate:null,showCloseButton:!1,onClose:function(){},closeOnEsc:!1}};return l.getDefaults=function(){return s},l.setDefaults=function(o){void 0===o&&(o={}),t.extend(!0,s,o)},l.alert=function(o){function n(){a.close(),o.onClose()}void 0===o&&(o={});try{if(o=t.extend({},s.alert,o),o.body=t.trim(o.body.replace(/&nbsp;/g,"")),""===o.body)throw{name:"Alert Modal",message:"body can't be blank!"};var a=new l(o);e(a.element,"click",".close",n),o.closeOnEsc&&e(a.element,"keyup",27,n)}catch(t){console.error(t.name+": "+t.message)}},l.confirm=function(o){function n(t){a.close(),o.onClose(t)}void 0===o&&(o={});try{if(o=t.extend({},s.confirm,o),o.footer=o.footer.replace("{{btnNo}}",o.btnLabels[0]),o.footer=o.footer.replace("{{btnYes}}",o.btnLabels[1]),o.body=t.trim(o.body.replace(/&nbsp;/g,"")),""===o.body)throw{name:"Confirm Modal",message:"body can't be blank!"};var a=new l(o);e(a.element,"click",".modal-footer > .btn-yes",function(){return n(!0)}),e(a.element,"click",".modal-footer > .btn-no",function(){return n(!1)}),o.showCloseButton&&e(a.element,"click",".close",function(){return n(null)}),o.closeOnEsc&&e(a.element,"keyup",27,function(){return n(!1)})}catch(t){console.error(t.name+": "+t.message)}},l.prompt=function(o){function n(t){void 0===t&&(t=!0);var e=a.val();d.close(),a.filter(":checkbox").length>0&&(e=a.filter(":checked").map(function(t,o){return o.value}).toArray()),a.filter(":radio").length>0&&(e=a.filter(":checked")[0].value),t?o.onClose(e):o.onClose(null)}void 0===o&&(o={});try{if(o=t.extend({},s.prompt,o),o.body=t.trim(o.body.replace(/&nbsp;/g,"")),""===o.body)throw{name:"Prompt Modal",message:"body can't be blank!"};o.footer=o.footer.replace("{{btnLabel}}",o.btnLabel),o.body=t('<div class="form-group" style="margin-bottom:0" />').html(o.body);var a=o.body.find(":input"),d=new l(o);o.validate&&(a.on("input change",function(t){if(("change"===t.type||o.body.hasClass("validated"))&&d.element.hasClass("active-modal")){var e=o.validate(a);o.body.removeClass("has-error").find(".validation-message").remove(),e?(o.body.addClass("validated has-error").append('\n\t\t\t\t\t\t\t\t<span class="help-block validation-message" style="margin:0">'+e+"</span>\n\t\t\t\t\t\t\t"),d.element.find(".modal-footer > button").attr("disabled",!0)):d.element.find(".modal-footer > button").attr("disabled",!1)}}),o.validate(a)&&d.element.find(".modal-footer > button").attr("disabled",!0)),e(d.element,"click",".modal-footer > .btn-confirm",function(){return n(!0)}),e(d.element,"keypress",13,function(){d.element.find(".modal-footer > .btn-confirm").trigger("click")}),o.showCloseButton&&e(d.element,"click",".close",function(){return n(!1)}),o.closeOnEsc&&e(d.element,"keyup",27,function(){return n(!1)})}catch(t){console.error(t.name+": "+t.message)}},l});
